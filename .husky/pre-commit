#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Running tests & checking coverage (min 80%)..."
npm run test:cov --silent
RESULT=$?

if [ $RESULT -ne 0 ]; then
  echo "âŒ Push rejected: Coverage must be at least 80%."
  echo "   ğŸ’¡ Run 'npm run test:cov' locally to see details."
  exit 1
fi

echo "âœ… Coverage OK â€” Push allowed ğŸš€"
exit 0
